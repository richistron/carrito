"use strict";angular.module("carritoApp",["ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("carritoApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("carritoApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("carritoApp").controller("NavCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("carritoApp").directive("productGrid",function(){return{templateUrl:"views/product-grid.html",restrict:"E",controller:"CheckoutCtrl"}}),angular.module("carritoApp").factory("productsFactory",function(){var a=[{id:1,name:"MacBook Pro 15 inches",price:21500.3,description:"Retina display, 8 GB RAM.",stock:1},{id:2,name:"MacBook Pro 15 inches",price:28500.3,description:"Retina display, 16 GB RAM.",stock:2},{id:3,name:"MacBook Air 13 inches",price:1500.2,description:"Retina display, 16 GB RAM.",stock:15},{id:4,name:"MacBook Air 13 inches",price:1000.5,description:"Retina display, 8 GB RAM.",stock:15},{id:5,name:"Mouse path",price:100,description:"Magic apple path",stock:300}];return{get:function(){return a}}}),angular.module("carritoApp").directive("carritoWidget",function(){return{templateUrl:"views/carrito-widget.html",restrict:"E",controller:"CheckoutCtrl"}}),angular.module("carritoApp").controller("CheckoutCtrl",["$scope","itemsFactory","productsFactory",function(a,b,c){localStorage.clear(),a.$watch("items",function(c,d){c!==d&&b.set(a.items)},!0),a.$watch("products"),a.totalItems=function(){var b=0;return a.items.forEach(function(a){b=parseInt(b)+parseInt(a.onCart)}),b},a.getTotal=function(){var a=0;return b.get().forEach(function(b){a=(parseFloat(a)+parseFloat(b.price)*parseFloat(b.onCart)).toFixed(2)}),a},a.addItem=function(b){a.exists(b)?a.items.forEach(function(c,d){c.id==b.id&&(a.items[d].stock=a.items[d].stock-1,a.items[d].onCart=a.items[d].onCart+1)}):(b.stock=b.stock-1,b.onCart=b.onCart+1,a.items.push(b))},a.exists=function(b){return a.items.filter(function(a){return a.id===b.id}).length>0},a.isAvailable=function(a){return a.stock>0},a.items=b.get(),a.products=c.get(),a.products.forEach(function(a){a.onCart=a.onCart||0})}]),angular.module("carritoApp").factory("itemsFactory",function(){var a="checkout-items";return{get:function(){return JSON.parse(localStorage.getItem(a)||"[]")},set:function(b){localStorage.setItem(a,JSON.stringify(b))}}});